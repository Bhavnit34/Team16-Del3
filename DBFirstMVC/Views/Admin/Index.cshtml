@model IEnumerable<DBFirstMVC.Request>
@{

Layout = "~/Views/Shared/adminView.cshtml";

}
@{
    ViewBag.Title = "Index";
    ViewBag.CurrentUserTitle = @ViewBag.CurrentUser;
}


<h2>Requests</h2>
@Html.ActionLink("Next Round", "NextRound", null, new { onclick="return confirm('Are you sure you want to process requests and move onto the next round?')" }) |
<a id="scrollToBottom">Bottom of Page</a>
<table style="float:right;"> 
    <tr><td class="approved"></td><td>APROVED</td></tr>
     <tr><td class="rejected"></td><td>REJETCED</td></tr>
       <tr><td class="pending"></td><td>PENDING</td></tr>
     <tr><td class="modified"></td><td>APPROVED BUT MODIFIED</td></tr>
    </table>

<table>
    <tr>
        <th>
            @Html.ActionLink("User", "Index", new { sortOrder = ViewBag.UserSortParm })
        </th>
        <th>
            @Html.ActionLink("Title", "Index", new { sortOrder = ViewBag.TitleSortParm })
        </th>
        <th>
            @Html.ActionLink("Type", "Index", new { sortOrder = ViewBag.TypeSortParm })
        </th>
        <th>
            @Html.ActionLink("Length", "Index", new { sortOrder = ViewBag.LengthSortParm })
        </th>
        <th>
            @Html.ActionLink("Day", "Index", new { sortOrder = ViewBag.DaySortParm })
        </th>
        <th>
            @Html.Label("Period")
        </th>
        <th>
            @Html.ActionLink("Priority", "Index", new { sortOrder = ViewBag.PrioritySortParm })
        </th>
        <th>
            @Html.ActionLink("Adhoc", "Index", new { sortOrder = ViewBag.AdhocSortParm })
        </th>
        <th>
            @Html.ActionLink("Semester", "Index", new { sortOrder = ViewBag.SemesterSortParm })
        </th>
        <th>
            @Html.ActionLink("Round", "Index", new { sortOrder = ViewBag.RoundSortParm })
        </th>
        <th>
            @Html.ActionLink("Status", "Index", new { sortOrder = ViewBag.StatusSortParm })
        </th>
    </tr>
    @foreach (var item in Model) {
        var statusClass = "";
        var status = "";
        var day = "";
        var time = "";

        if (item.Status == 1.ToString())
        {
            statusClass = "approved";
            status = "Approved";

        }

        else if (item.Status == 2.ToString())
        {
            statusClass = "rejected";
            status = "Rejected";



        }
        else if (item.Status == 3.ToString())
        {
            statusClass = "modified";
            status = "Approved But Modified";


        }

        else
        {
            statusClass = "pending";
            status = "Pending";

        }
        if (item.DayID == 1)
    {
        day = "Monday";

    }

    else if (item.DayID == 2)
    {
        day = "Tuesday";


    }
    else if (item.DayID == 3)
    {
        day = "Wednesday";



    }

    else if (item.DayID == 4)
    {
        day = "Thursday";
    }
    else
    {
        day = "Friday";
    }

    switch (item.PeriodID)
    {
        case 1: time = "9:00";
            break;
        case 2: time = "10:00";
            break;
        case 3: time = "11:00";
            break;
        case 4: time = "12:00";
            break;
        case 5: time = "13:00";
            break;
        case 6: time = "14:00";
            break;
        case 7: time = "15:00";
            break;
        case 8: time = "16:00";
            break;
        case 9: time = "17:00";
            break;
    }
     <tr >
        <td class ="@statusClass">
            @Html.DisplayFor(modelItem => item.User.Username)
        </td>
        <td>
            <b>@Html.DisplayFor(modelItem => item.ModCode)</b><br />
            @Html.DisplayFor(modelItem => item.Module.Title)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.SessionType)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.SessionLength)
        </td>
        <td>
            @day
        </td>
        <td>
            @time
        </td>
        <td>
             @{
                    if(item.PriorityRequest == 1){
                        @Html.CheckBox("Priority",true, new{@disabled = "disabled"})
                    }
                    else{
                        @Html.CheckBox("Priority",false, new{@disabled = "disabled"})
                    }
        
              }
           <!-- @Html.DisplayFor(modelItem => item.PriorityRequest) -->
        </td>
        <td>
            @{
                if(item.AdhocRequest == 1){
                    @Html.CheckBox("AdHoc",true, new{@disabled = "disabled"})
                }
                else{
                    @Html.CheckBox("AdHoc",false, new{@disabled = "disabled"})
                }
        
            }
            <!--@Html.DisplayFor(modelItem => item.AdhocRequest)-->
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Semester)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.RoundID)
        </td>
        <td>
            @status
        </td>
        <td class ="@statusClass">
          @Html.ActionLink("Get Request", "GetRequest", new { id=item.RequestID})
        </td>
    </tr>
}

</table>
<style type="text/css">

    .approved {
        background-color:green;
    }
    .rejected {
        background-color:#C80000;
    }
    .pending {
        background-color:grey;
    }
      .modified {
        background-color:lightyellow;
    }
</style>
@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")
}
@section CreateNewScript{
    <script type="text/javascript">
        $(document).ready(function () {
            $('#scrollToBottom').click(function () {
                window.scrollTo(0, document.body.scrollHeight);
            });
        });
     </script>
    }
